---
# Questions for publishing and releasing features

# the main menu
SelectPublishReleaseFeatures:
  when: "{{ template_profile != 'minimum' }}"
  type: yaml
  default: |-
    {% if template_profile == 'recommended' %}
      [SelectCitation_flag, AddZenodo]
    {%- else -%}
      []
    {%- endif %}
  help: Select publish and release features
  multiselect: true
  choices:
    Citation:
      value: SelectCitation_flag
      # validator: "{% if something != 'AnotherThing' %}BlaBla{% endif %}"
    Changelog:
      value: AddChangeLog_flag
      # validator: "{% if something != 'AnotherThing' %}BlaBla{% endif %}"
    Zenodo integration instructions:
      value: AddZenodo_flag
      # validator: "{% if something != 'AnotherThing' %}BlaBla{% endif %}"
    Package keywords(NOT_IMPLEMENTED):
      value: not_implemented_keywords
      # validator: "{% if something != 'AnotherThing' %}BlaBla{% endif %}"


# Sub-menus
# split AddCitation --> enable_citation_file and enable_cffconvert
SelectCitation:
  when: "{{ 'SelectCitation_flag' in SelectPublishReleaseFeatures }}"
  type: yaml
  default: |-
    {% if template_profile == 'recommended' %}
      [enable_citation_file, enable_cffconvert]
    {%- else -%}
      []
    {%- endif %}
  help: Select GitHub Action workflows
  multiselect: true
  choices:
    CITATION.cff file (NOT_IMPLEMENTED):
      value: AddCitationFile_flag
      # validator: "{% if something != 'AnotherThing' %}BlaBla{% endif %}"
    cffconvert GitHub Action (NOT_IMPLEMENTED):
      value: AddCFFConvert_flag
      # validator: "{% if something != 'AnotherThing' %}BlaBla{% endif %}"


# computed features
AddChangeLog:
  type: bool
  default: "{{ 'AddChangeLog_flag' in SelectPublishReleaseFeatures }}"
  when: false

AddZenodo:
  type: bool
  default: "{{ 'AddZenodo_flag' in SelectPublishReleaseFeatures }}"
  when: false
