---
# Questions for typing features

# the main menu
SelectTypingFeatures:
  when: "{{ template_profile != 'minimum' }}"
  type: yaml
  default: |-
    {% if template_profile == 'recommended' %}
      [AddTyping_flag, AddTypingInDocs_flag, AddGitHubActionTypeCheck_flag]
    {%- else -%}
      []
    {%- endif %}
  help: Select typing features
  multiselect: true
  choices:
    Support Typing (add py.typed file):
      value: AddTyping_flag
    GitHub Action to type check:
      value: AddGitHubActionTypeCheck_flag
    Typing in API documentation:
      value: AddTypingInDocs_flag

# TODO add runtime type checking (using pydantic or typeguard)

SelectTypeChecker:
  when: "{{ template_profile != 'minimum' and 'AddTyping_flag' in SelectTypingFeatures }}"
  type: str
  default: |-
    {%- if template_profile == 'recommended' -%}
    pyright
    {%- endif %}
  help: Select a type checker
  choices:
    Mypy:
      value: mypy
    Pyright:
      value: pyright
    # TODO add pyrefly https://pyrefly.org/
    # TODO add ty https://github.com/astral-sh/ty

AddPyTyped:
  type: bool
  default: "{{ 'AddTyping_flag' in SelectTypingFeatures }}"
  when: false

AddGithubActionTypeCheck:
  type: bool
  default: "{{ 'AddGitHubActionTypeCheck_flag' in SelectTypingFeatures and SelectTypeChecker != '' }}"
  when: false

AddTypingInDocs:
  type: bool
  default: "{{ 'AddTypingInDocs_flag' in SelectTypingFeatures }}"
  when: false

# TODO ask how strict to typecheck